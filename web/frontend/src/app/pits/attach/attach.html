<div class="attach-container">
  <mat-card class="attach-card">
    <mat-card-header>
      <mat-icon mat-card-avatar class="attach-icon">add_circle</mat-icon>
      <mat-card-title>Attach a PIT</mat-card-title>
      <mat-card-subtitle>Enter the PIT code provided by your instructor</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="attachForm" (ngSubmit)="onSubmit()" class="attach-form">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>PIT Code</mat-label>
          <input
            matInput
            formControlName="pitCode"
            placeholder="Enter PIT code (e.g., JAVA-101, SPRING-ADVANCED)"
            [disabled]="loading()"
          />
          <mat-icon matPrefix>vpn_key</mat-icon>
          @if (pitCodeControl.invalid && pitCodeControl.touched) {
            <mat-error>{{ getPitCodeErrorMessage() }}</mat-error>
          }
          <mat-hint>Ask your instructor for the PIT code</mat-hint>
        </mat-form-field>

        <div class="form-actions">
          <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="attachForm.invalid || loading()"
          >
            <mat-icon>add</mat-icon>
            @if (loading()) {
              Attaching...
            } @else {
              Attach PIT
            }
          </button>
          <button
            mat-button
            type="button"
            routerLink="/pits"
            [disabled]="loading()"
          >
            Cancel
          </button>
        </div>
      </form>

      <div class="info-section">
        <mat-icon class="info-icon">info</mat-icon>
        <div class="info-text">
          <h4>How to attach a PIT</h4>
          <ol>
            <li>Get the PIT code from your instructor</li>
            <li>Enter the code in the field above</li>
            <li>Click "Attach PIT" to add it to your account</li>
            <li>Start uploading solutions!</li>
          </ol>
          <p class="note">
            <strong>Note:</strong> In the current version, all available PITs are automatically
            accessible. The attach feature will be fully implemented soon.
          </p>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</div>
